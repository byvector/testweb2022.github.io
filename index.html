<!DOCTYPE html>
<html lang="en-US">


<body>
<h2> SSO Web Page Testing</h2>
<div>page version: 5</div>
<div>
    <h4>get the access_token from session storage:</h4>
    <div id="access_token"></div>
</div>
<br/>
<div>
    <h4>get the refresh_token from session storage:</h4>
    <div id="refresh_token"></div>
</div>
<br/>
<a href="https://www.sc.com/pk/" target="blank">open a link in the webview</a>
<br/>
<br/>
<div>
    <!-- <button onclick="setToken()">set access_token</button> -->
    <button onclick="exit()"><h5>Exit the webview</h5></button>
</div>


<script>
    function exit() {
        try {
            velocity_exit.postMessage("");
        } catch (e) {
            alert(e.message);
        }
    }

    // test storage event
    function setToken() {
        window.sessionStorage.setItem("access_token", "access token 1111111111");
        window.sessionStorage.setItem("refresh_token", "refresh token 2222222");
        window.dispatchEvent(new Event('storage'));
    }

    window.addEventListener("storage", (e) => {
            console.log("storage is triggered");
            document.getElementById("access_token").textContent = window.sessionStorage.getItem('access_token');
            document.getElementById("refresh_token").textContent = window.sessionStorage.getItem('refresh_token');
        }
    );

</script>

</body>

</html>
